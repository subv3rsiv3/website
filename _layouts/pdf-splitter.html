---
layout: default
---
<div class="pdf-split-container">
    <h2 class="pdf-split-h2">PDF Splitter</h2>

    <!-- File Selection -->
    <label class="label"; for="pdfFile">Select PDF File:</label>
    <input class="input"; type="file" id="pdfFile" accept="application/pdf">

    <!-- Page Ranges -->
    <div id="pageRanges">
        <div class="page-range">
            <input type="number" class="startPage" placeholder="Start Page">
            <input type="number" class="endPage" placeholder="End Page">
            <button onclick="deleteRange(this)">Delete</button>
        </div>
    </div>

    <!-- Add Page Range Button -->
    <button class="button"; onclick="addPageRange()">Add Page Range</button>

    <!-- Split PDF Button -->
    <button class="button"; onclick="splitPDF()">Split PDF</button>

</div>

<!-- Include PDF-Lib for manipulating PDFs -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>

<script>
    let pdfBytes = null;

    // Handle file upload
    document.getElementById('pdfFile').addEventListener('change', async function(event) {
        const file = event.target.files[0];
        if (file) {
            pdfBytes = await file.arrayBuffer();
        }
    });

    // Add more page ranges
    function addPageRange() {
        const pageRangesDiv = document.getElementById('pageRanges');
        const newRange = document.createElement('div');
        newRange.className = 'page-range';
        newRange.innerHTML = `
            <input type="number" class="startPage" placeholder="Start Page">
            <input type="number" class="endPage" placeholder="End Page">
            <button onclick="deleteRange(this)">Delete</button>
        `;
        pageRangesDiv.appendChild(newRange);
    }

    // Delete a page range
    function deleteRange(button) {
        const rangeDiv = button.parentElement;
        rangeDiv.remove();
    }

    // Function to split the PDF based on ranges
    async function splitPDF() {
        if (!pdfBytes) {
            alert('Please upload a PDF file first.');
            return;
        }

        const pdfDoc = await PDFLib.PDFDocument.load(pdfBytes);
        const totalPages = pdfDoc.getPageCount();

        const startPages = Array.from(document.querySelectorAll('.startPage')).map(input => parseInt(input.value));
        const endPages = Array.from(document.querySelectorAll('.endPage')).map(input => parseInt(input.value));

        for (let i = 0; i < startPages.length; i++) {
            const startPage = startPages[i] - 1;  // PDF pages are 0-indexed
            const endPage = endPages[i] - 1;

            if (startPage >= 0 && endPage < totalPages && startPage <= endPage) {
                const newPdfDoc = await PDFLib.PDFDocument.create();
                for (let j = startPage; j <= endPage; j++) {
                    const [copiedPage] = await newPdfDoc.copyPages(pdfDoc, [j]);
                    newPdfDoc.addPage(copiedPage);
                }

                const pdfBytes = await newPdfDoc.save();
                downloadPDF(pdfBytes, `split_section_${i + 1}.pdf`);
            } else {
                alert(`Invalid page range: ${startPages[i]} - ${endPages[i]}`);
            }
        }
    }

    // Helper function to download the split PDF
    function downloadPDF(pdfBytes, fileName) {
        const blob = new Blob([pdfBytes], { type: 'application/pdf' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = fileName;
        link.click();
    }
</script>